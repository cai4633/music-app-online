{"version":3,"sources":["webpack:///./src/views/singer/singer.vue?49da","webpack:///./src/components/list-view/list-view.vue?c71c","webpack:///./src/components/list-view/list-view.vue","webpack:///./src/components/list-view/list-view.vue?5556","webpack:///./src/components/list-view/list-view.vue?ee4a","webpack:///./src/views/singer/singer.vue","webpack:///./src/views/singer/singer.vue?329e","webpack:///./src/views/singer/singer.vue?8f87","webpack:///./src/components/list-view/list-view.vue?8d74","webpack:///./src/views/singer/singer.vue?f819","webpack:///./src/api/singer.ts","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./node_modules/core-js/modules/es.string.fixed.js","webpack:///./src/common/js/xhr.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","singerlist","on","gotoDetails","staticRenderFns","ref","getPosY","scrollEnd","_l","item","key","id","refInFor","_v","_s","title","singer","$event","selectItem","directives","name","rawName","value","webp2jpg","singer_pic","expression","singer_name","titleList","currentIndex","length","index","class","active","shortcutClick","shotcutList","heightlist","titleHeight","isClick","$nextTick","init","$refs","singerWrap","disable","enable","BOTTOM","playlist","listView","style","bottom","refresh","calHeight","_getShortcutList","img","replace","e","currentTarget","dataset","parseInt","_scrollTo","listgroup","height","offsetHeight","Array","prototype","map","call","li","y","scrollTo","i","diff","distance","fixedTransfrom","fixed","transform","forEach","push","singer_id","mid","singer_mid","$emit","components","Scroll","Loading","computed","component","HOT_NAME","HOT_SONG_LENGTH","items","avatar","_getSingerLists","data","hot","arr","ret","match","sort","a","b","charCodeAt","concat","$router","path","setSinger","then","response","code","normalizeSinger","ListView","getSingerLists","get","Promise","resolve","getSingerSongs","comm","ct","cv","singerSongList","method","param","order","singerMid","begin","num","module","query","Object","assign","sign","format","requireObjectCoercible","quot","exports","string","tag","attribute","S","String","p1","fails","METHOD_NAME","test","toLowerCase","split","$","createHTML","forcedStringHTMLMethod","target","proto","forced","sign_generator","str","count","Math","floor","random","window","__sign_hash_20200305","JSON","stringify"],"mappings":"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","file":"static/js/chunk-4c512c0d.86985b1f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"singer\"},[_c('list-view',{attrs:{\"singerlist\":_vm.singerlist},on:{\"select\":_vm.gotoDetails}}),_c('transition',{attrs:{\"name\":\"slide-in\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"listView\",staticClass:\"list-view\"},[_c('scroll',{ref:\"singerWrap\",staticClass:\"singer-wrap\",attrs:{\"data\":_vm.singerlist,\"probeType\":3},on:{\"scroll\":_vm.getPosY,\"scrollEnd\":_vm.scrollEnd}},[_c('ul',{staticClass:\"singer-content\"},_vm._l((_vm.singerlist),function(item){return _c('li',{key:item.id,ref:\"listgroup\",refInFor:true},[_c('ul',{staticClass:\"singer-inner\"},[_c('h3',{ref:\"title\",refInFor:true},[_vm._v(_vm._s(item.title))]),_vm._l((item.items),function(singer){return _c('li',{key:singer.id,staticClass:\"clearfix\",on:{\"click\":function($event){return _vm.selectItem(singer)}}},[_c('div',{staticClass:\"avatar\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.webp2jpg(singer.singer_pic)),expression:\"webp2jpg(singer.singer_pic)\"}]})]),_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(singer.singer_name))])])})],2)])}),0)]),_c('h2',{ref:\"fixed\",staticClass:\"fixed-title\"},[_vm._v(_vm._s(_vm.titleList[_vm.currentIndex]))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.singerlist.length),expression:\"!singerlist.length\"}],staticClass:\"loading-wrap\"},[_c('loading')],1),_c('div',{staticClass:\"list-shortcut\"},[_c('ul',_vm._l((_vm.shotcutList),function(item,index){return _c('li',{key:item,class:{ active: _vm.currentIndex === index },attrs:{\"data-index\":index},on:{\"click\":_vm.shortcutClick}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Scroll from \"base/scroll/scroll.vue\"\r\nimport Loading from \"base/loading/loading.vue\"\r\nimport { Component, Prop, Vue, Watch, Mixins } from \"vue-property-decorator\"\r\nimport { mapGetters } from \"vuex\"\r\nimport { PlaylistMixin } from \"common/js/mixins\"\r\nimport Singer from \"common/js/singer\"\r\n@Component({\r\n  components: { Scroll, Loading },\r\n  computed: {\r\n    ...mapGetters([\"playlist\", \"fullScreen\"])\r\n  }\r\n})\r\nexport default class ListView extends Mixins(PlaylistMixin) {\r\n  shotcutList: string[] = []\r\n  heightlist: any[] = []\r\n  titleList: string[] = []\r\n  currentIndex = 0\r\n  titleHeight = 0\r\n  isClick = false\r\n  $refs!: {\r\n    listView: HTMLElement\r\n    singerWrap: Scroll\r\n    fixed: HTMLElement\r\n    listgroup: Element[]\r\n    title: HTMLElement[]\r\n  }\r\n\r\n  @Prop()\r\n  private singerlist!: object[]\r\n\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.init()\r\n    })\r\n  }\r\n  \r\n  deactivated() {\r\n    this.$nextTick(()=>{\r\n      this.$refs.singerWrap.disable()\r\n    })\r\n  }\r\n  activated() {\r\n    this.$nextTick(()=>{\r\n      this.$refs.singerWrap.enable()\r\n    })\r\n  }\r\n\r\n  handlePlaylist() {\r\n    const BOTTOM = this.playlist.length ? 45 : 0\r\n    if (this.$refs.singerWrap) {\r\n      this.$refs.listView.style.bottom = `${BOTTOM}px`\r\n      this.$refs.singerWrap.refresh()\r\n    }\r\n  }\r\n\r\n  init() {\r\n    this.calHeight()\r\n    this._getShortcutList()\r\n  }\r\n\r\n  webp2jpg(img: string) {\r\n    return img.replace(/webp$/, \"jpg\")\r\n  }\r\n  scrollEnd() {\r\n    this.isClick = false\r\n  }\r\n  shortcutClick(e: MouseEvent) {\r\n    const index = (e.currentTarget as HTMLElement).dataset.index\r\n    if (index) {\r\n      this.currentIndex = parseInt(index)\r\n      this._scrollTo(this.currentIndex)\r\n      this.isClick = true\r\n    }\r\n  }\r\n\r\n  // 计算热门,[a-z] li的高度\r\n  calHeight() {\r\n    this.$nextTick(() => {\r\n      const listgroup = this.$refs.listgroup || []\r\n      let height = 0\r\n      if (listgroup.length) {\r\n        this.titleHeight = this.$refs.title[0].offsetHeight\r\n        this.heightlist = Array.prototype.map.call( listgroup, (li: { [key: string]: number }): number => {\r\n            height += li.offsetHeight\r\n            return height\r\n          }\r\n        )\r\n      }\r\n    })\r\n  }\r\n\r\n  _scrollTo(index: number) {\r\n    if (this.heightlist.length) {\r\n      const y: number = index >= 1 ? -this.heightlist[index - 1] : 0\r\n      this.$refs.singerWrap.scrollTo(0, y)\r\n    }\r\n  }\r\n\r\n  //滚动事件\r\n  getPosY(y: number) {\r\n    if (this.heightlist.length && !this.isClick) {\r\n      for (let i = 0; i < this.heightlist.length; i++) {\r\n        if (this.heightlist[i] >= -y) {\r\n          this.currentIndex = i\r\n          break\r\n        }\r\n      }\r\n    }\r\n    this.diff(y)\r\n  }\r\n\r\n  //fixed bar 滚动切换效果\r\n  diff(y: number) {\r\n    let distance = this.heightlist.length ? this.heightlist[this.currentIndex] + y - this.titleHeight : 0\r\n    distance = distance > 0 ? 0 : distance\r\n    this.fixedTransfrom(distance)\r\n  }\r\n\r\n  fixedTransfrom(distance: number) {\r\n    this.$refs.fixed.style.transform = `translateY(${distance}px)`\r\n  }\r\n\r\n  //获取list-shortcut的content\r\n  _getShortcutList() {\r\n    this.singerlist.forEach((item: any) => {\r\n      this.shotcutList.push(item.title[0])\r\n      this.titleList.push(item.title)\r\n    })\r\n  }\r\n\r\n  selectItem(item: any) {\r\n    const singer = new Singer({\r\n      id: item.singer_id,\r\n      name: item.singer_name,\r\n      mid: item.singer_mid\r\n    })\r\n    this.$emit(\"select\", singer)\r\n  }\r\n\r\n  @Watch(\"singerlist\")\r\n  watchSingerlist() {\r\n    this.init()\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-view.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-view.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./list-view.vue?vue&type=template&id=495a8fc8&scoped=true&\"\nimport script from \"./list-view.vue?vue&type=script&lang=ts&\"\nexport * from \"./list-view.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./list-view.vue?vue&type=style&index=0&id=495a8fc8&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"495a8fc8\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Watch, Mixins } from \"vue-property-decorator\"\r\nimport { getSingerLists } from \"../../api/singer\"\r\nimport { ERR_OK } from \"api/config\"\r\nimport { Singers } from \"common/js/singer\"\r\nimport Scroll from \"base/scroll/scroll.vue\"\r\nimport ListView from \"@/components/list-view/list-view.vue\"\r\nimport { mapMutations, MutationMethod } from \"vuex\"\r\nimport { Mutation } from \"vuex-class\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport jsonp0 from \"common/js/jsonp\"\r\n\r\nconst HOT_NAME = \"热门\"\r\nconst HOT_SONG_LENGTH = 10\r\n@Component({\r\n  components: { Scroll, ListView }\r\n})\r\nexport default class Singer extends Vue {\r\n  items = [\r\n    {\r\n      avatar:\r\n        \"https://y.gtimg.cn/music/photo_new/T001R300x300M000002J4UUk29y8BY.jpg?max_age=2592000\",\r\n      name: \"薛之谦\"\r\n    }\r\n  ]\r\n  singerlist: any[] = []\r\n\r\n  @Mutation(\"SET_SINGER\") setSinger!: MutationMethod\r\n\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this._getSingerLists()\r\n    })\r\n  }\r\n\r\n  normalizeSinger(data: { title: string }[]) {\r\n    const map: any = {\r\n      hot: {\r\n        title: HOT_NAME,\r\n        items: []\r\n      }\r\n    }\r\n    data.forEach((item, index, arr) => {\r\n      if (index <= HOT_SONG_LENGTH - 1) {\r\n        map.hot.items.push(item)\r\n      }\r\n      const key = item.title\r\n      if (!map[key]) {\r\n        map[key] = {\r\n          title: key,\r\n          items: []\r\n        }\r\n      }\r\n      map[key].items.push(item)\r\n    })\r\n\r\n    // 处理map.items 得到有序列表\r\n    const hot: object[] = []\r\n    const ret: { title: string }[] = []\r\n    for (const key in map) {\r\n      if (key.match(/^[a-zA-Z]$/g)) {\r\n        ret.push(map[key])\r\n      } else if (key === \"hot\") {\r\n        hot.push(map[key])\r\n      }\r\n    }\r\n    ret.sort((a: { title: string }, b: { title: string }): number => {\r\n      return a.title.charCodeAt(0) - b.title.charCodeAt(0)\r\n    })\r\n\r\n    return hot.concat(ret)\r\n  }\r\n\r\n  gotoDetails(singer: Singers) {\r\n    this.$router.push({ path: `/singer/${singer.mid}` })\r\n    this.setSinger(singer)\r\n  }\r\n\r\n  _getSingerLists() {\r\n    getSingerLists().then(response => {\r\n      if (response.code === ERR_OK) {\r\n        this.singerlist = this.normalizeSinger(response.data.singerlist)\r\n      }\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./singer.vue?vue&type=template&id=0a796f26&scoped=true&\"\nimport script from \"./singer.vue?vue&type=script&lang=ts&\"\nexport * from \"./singer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./singer.vue?vue&type=style&index=0&id=0a796f26&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a796f26\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-view.vue?vue&type=style&index=0&id=495a8fc8&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-view.vue?vue&type=style&index=0&id=495a8fc8&lang=stylus&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=style&index=0&id=0a796f26&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=style&index=0&id=0a796f26&lang=stylus&scoped=true&\"","import { xhrOptions, options2 } from \"./config\"\r\nimport { sign_generator } from \"common/js/xhr\"\r\nimport axios from \"axios\"\r\nimport jsonp from \"common/js/jsonp\"\r\n// const url = \"https://u.y.qq.com/cgi-bin/musics.fcg\"\r\n\r\nconst path = \"/cgi-bin/musics.fcg\"\r\nexport function getSingerLists() {\r\n  return axios\r\n    .get(\r\n      \"https://www.fastmock.site/mock/352dcbb7ac339fe1b7ed02bbfa3c073b/mock/getsingerlists\"\r\n    )\r\n    .then(response => Promise.resolve(response.data.data))\r\n}\r\n\r\nexport function getSingerSongs(mid: string) {\r\n  const data = {\r\n    comm: { ct: 24, cv: 0 },\r\n    singerSongList: {\r\n      method: \"GetSingerSongList\",\r\n      param: { order: 1, singerMid: mid, begin: 0, num: 30 },\r\n      module: \"musichall.song_list_server\"\r\n    }\r\n  }\r\n\r\n  const query = Object.assign({}, xhrOptions, {\r\n    \"-\": \"getSingerSong09973278224209037\",\r\n    sign: sign_generator(data),\r\n    data: data,\r\n    format: \"jsonp\"\r\n  })\r\n\r\n  return jsonp( \"https://u.y.qq.com/cgi-bin/musics.fcg\", query, options2 ).then((response: any) => Promise.resolve(response.singerSongList))\r\n}\r\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.fixed` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.fixed\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('fixed') }, {\n  fixed: function fixed() {\n    return createHTML(this, 'tt', '', '');\n  }\n});\n","function sign_generator(data: any) {\r\n  const str = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n  const count = Math.floor(Math.random() * 7 + 10);\r\n  let sign = \"zza\";\r\n  for (let i = 0; i < count; i++) {\r\n    sign += str[Math.floor(Math.random() * 36)];\r\n  }\r\n  return (sign += (window as any).__sign_hash_20200305(\r\n    \"CJBPACrRuNy7\" + JSON.stringify(data)\r\n  ));\r\n}\r\n\r\nexport { sign_generator };\r\n"],"sourceRoot":""}