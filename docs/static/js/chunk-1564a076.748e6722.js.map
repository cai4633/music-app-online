{"version":3,"sources":["webpack:///./src/views/singer/singer.vue?a801","webpack:///./src/components/list-view/list-view.vue?8cf7","webpack:///./src/components/list-view/list-view.vue","webpack:///./src/components/list-view/list-view.vue?5556","webpack:///./src/components/list-view/list-view.vue?ee4a","webpack:///./src/views/singer/singer.vue","webpack:///./src/views/singer/singer.vue?329e","webpack:///./src/views/singer/singer.vue?8f87","webpack:///./src/api/singer.ts","webpack:///./src/components/list-view/list-view.vue?3a34","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./src/views/singer/singer.vue?5841","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./node_modules/core-js/modules/es.string.fixed.js","webpack:///./src/common/js/xhr.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","singerlist","on","gotoDetails","staticRenderFns","ref","getPosY","scrollEnd","_l","item","key","id","refInFor","_v","_s","title","singer","$event","stopPropagation","selectItem","directives","name","rawName","value","webp2jpg","singer_pic","expression","singer_name","titleList","currentIndex","length","index","class","active","shortcutClick","shotcutList","heightlist","titleHeight","isClick","$nextTick","init","$refs","singerWrap","disable","enable","BOTTOM","playlist","listView","style","bottom","refresh","calHeight","_getShortcutList","img","replace","e","currentTarget","dataset","parseInt","_scrollTo","listgroup","height","offsetHeight","Array","prototype","map","call","li","y","scrollTo","i","diff","distance","fixedTransfrom","fixed","transform","forEach","push","singer_id","mid","singer_mid","$emit","components","Scroll","Loading","computed","component","HOT_NAME","HOT_SONG_LENGTH","items","avatar","_getSingerLists","data","hot","arr","ret","match","sort","a","b","charCodeAt","concat","$router","path","setSinger","then","response","code","normalizeSinger","ListView","getSingerLists","get","Promise","resolve","getSingerSongs","comm","ct","cv","singerSongList","method","param","order","singerMid","begin","num","module","query","Object","assign","sign","format","requireObjectCoercible","quot","exports","string","tag","attribute","S","String","p1","fails","METHOD_NAME","test","toLowerCase","split","$","createHTML","forcedStringHTMLMethod","target","proto","forced","sign_generator","str","count","Math","floor","random","window","__sign_hash_20200305","JSON","stringify"],"mappings":"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","file":"static/js/chunk-1564a076.748e6722.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"singer\"},[_c('list-view',{attrs:{\"singerlist\":_vm.singerlist},on:{\"select\":_vm.gotoDetails}}),_c('transition',{attrs:{\"name\":\"slide-in\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"listView\",staticClass:\"list-view\"},[_c('scroll',{ref:\"singerWrap\",staticClass:\"singer-wrap\",attrs:{\"data\":_vm.singerlist,\"probeType\":3},on:{\"scroll\":_vm.getPosY,\"scrollEnd\":_vm.scrollEnd}},[_c('ul',{staticClass:\"singer-content\"},_vm._l((_vm.singerlist),function(item){return _c('li',{key:item.id,ref:\"listgroup\",refInFor:true},[_c('ul',{staticClass:\"singer-inner\"},[_c('h3',{ref:\"title\",refInFor:true},[_vm._v(_vm._s(item.title))]),_vm._l((item.items),function(singer){return _c('li',{key:singer.id,staticClass:\"clearfix\",on:{\"click\":function($event){$event.stopPropagation();return _vm.selectItem(singer)}}},[_c('div',{staticClass:\"avatar\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.webp2jpg(singer.singer_pic)),expression:\"webp2jpg(singer.singer_pic)\"}]})]),_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(singer.singer_name))])])})],2)])}),0)]),_c('h2',{ref:\"fixed\",staticClass:\"fixed-title\"},[_vm._v(_vm._s(_vm.titleList[_vm.currentIndex]))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.singerlist.length),expression:\"!singerlist.length\"}],staticClass:\"loading-wrap\"},[_c('loading')],1),_c('div',{staticClass:\"list-shortcut\"},[_c('ul',_vm._l((_vm.shotcutList),function(item,index){return _c('li',{key:item,class:{ active: _vm.currentIndex === index },attrs:{\"data-index\":index},on:{\"click\":function($event){$event.stopPropagation();return _vm.shortcutClick($event)}}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Scroll from \"base/scroll/scroll.vue\";\r\nimport Loading from \"base/loading/loading.vue\";\r\nimport { Component, Prop, Vue, Watch, Mixins } from \"vue-property-decorator\";\r\nimport { mapGetters } from \"vuex\";\r\nimport { PlaylistMixin } from \"common/js/mixins\";\r\nimport Singer from \"common/js/singer\";\r\n@Component({\r\n\tcomponents: { Scroll, Loading },\r\n\tcomputed: {\r\n\t\t...mapGetters([\"playlist\", \"fullScreen\"]),\r\n\t},\r\n})\r\nexport default class ListView extends Mixins(PlaylistMixin) {\r\n\tshotcutList: string[] = [];\r\n\theightlist: any[] = [];\r\n\ttitleList: string[] = [];\r\n\tcurrentIndex = 0;\r\n\ttitleHeight = 0;\r\n\tisClick = false;\r\n\t$refs!: {\r\n\t\tlistView: HTMLElement;\r\n\t\tsingerWrap: Scroll;\r\n\t\tfixed: HTMLElement;\r\n\t\tlistgroup: Element[];\r\n\t\ttitle: HTMLElement[];\r\n\t};\r\n\r\n\t@Prop()\r\n\treadonly singerlist!: object[];\r\n\r\n\tmounted() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.init();\r\n\t\t});\r\n\t}\r\n\r\n\tdeactivated() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.$refs.singerWrap.disable();\r\n\t\t});\r\n\t}\r\n\tactivated() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.$refs.singerWrap.enable();\r\n\t\t});\r\n\t}\r\n\r\n\thandlePlaylist() {\r\n\t\tconst BOTTOM = this.playlist.length ? 45 : 0;\r\n\t\tif (this.$refs.singerWrap) {\r\n\t\t\tthis.$refs.listView.style.bottom = `${BOTTOM}px`;\r\n\t\t\tthis.$refs.singerWrap.refresh();\r\n\t\t}\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.calHeight();\r\n\t\tthis._getShortcutList();\r\n\t}\r\n\r\n\twebp2jpg(img: string) {\r\n\t\treturn img.replace(/webp$/, \"jpg\");\r\n\t}\r\n\tscrollEnd() {\r\n\t\tthis.isClick = false;\r\n\t}\r\n\tshortcutClick(e: MouseEvent) {\r\n\t\tconst index = (e.currentTarget as HTMLElement).dataset.index;\r\n\t\tif (index) {\r\n\t\t\tthis.currentIndex = parseInt(index);\r\n\t\t\tthis.isClick = true;\r\n\t\t\tthis._scrollTo(this.currentIndex);\r\n\t\t}\r\n\t}\r\n\r\n\t// 计算热门,[a-z] li的高度\r\n\tcalHeight() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tconst listgroup = this.$refs.listgroup || [];\r\n\t\t\tlet height = 0;\r\n\t\t\tif (listgroup.length) {\r\n\t\t\t\tthis.titleHeight = this.$refs.title[0].offsetHeight;\r\n\t\t\t\tthis.heightlist = Array.prototype.map.call(\r\n\t\t\t\t\tlistgroup,\r\n\t\t\t\t\t(li: { [key: string]: number }): number => {\r\n\t\t\t\t\t\theight += li.offsetHeight;\r\n\t\t\t\t\t\treturn height;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_scrollTo(index: number) {\r\n\t\tif (this.heightlist.length) {\r\n\t\t\tconst y: number = index >= 1 ? -this.heightlist[index - 1] : 0;\r\n\t\t\tthis.$refs.singerWrap.scrollTo(0, y);\r\n\t\t}\r\n\t}\r\n\r\n\t//滚动事件\r\n\tgetPosY(y: number) {\r\n\t\tif (this.heightlist.length && !this.isClick) {\r\n\t\t\tfor (let i = 0; i < this.heightlist.length; i++) {\r\n\t\t\t\tif (this.heightlist[i] >= -y) {\r\n\t\t\t\t\tthis.currentIndex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.diff(y);\r\n\t}\r\n\r\n\t//fixed bar 滚动切换效果\r\n\tdiff(y: number) {\r\n\t\tlet distance = this.heightlist.length\r\n\t\t\t? this.heightlist[this.currentIndex] + y - this.titleHeight\r\n\t\t\t: 0;\r\n\t\tdistance = distance > 0 ? 0 : distance;\r\n\t\tthis.fixedTransfrom(distance);\r\n\t}\r\n\r\n\tfixedTransfrom(distance: number) {\r\n\t\tthis.$refs.fixed.style.transform = `translateY(${distance}px)`;\r\n\t}\r\n\r\n\t//获取list-shortcut的content\r\n\t_getShortcutList() {\r\n\t\tthis.singerlist.forEach((item: any) => {\r\n\t\t\tthis.shotcutList.push(item.title[0]);\r\n\t\t\tthis.titleList.push(item.title);\r\n\t\t});\r\n\t}\r\n\r\n\tselectItem(item: any) {\r\n\t\tconst singer = new Singer({\r\n\t\t\tid: item.singer_id,\r\n\t\t\tname: item.singer_name,\r\n\t\t\tmid: item.singer_mid,\r\n\t\t});\r\n\t\tthis.$emit(\"select\", singer);\r\n\t}\r\n\r\n\t@Watch(\"singerlist\")\r\n\twatchSingerlist() {\r\n\t\tthis.init();\r\n\t}\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-view.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-view.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./list-view.vue?vue&type=template&id=334fd486&scoped=true&\"\nimport script from \"./list-view.vue?vue&type=script&lang=ts&\"\nexport * from \"./list-view.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./list-view.vue?vue&type=style&index=0&id=334fd486&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"334fd486\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Watch, Mixins } from \"vue-property-decorator\"\r\nimport { getSingerLists } from \"../../api/singer\"\r\nimport { ERR_OK } from \"api/config\"\r\nimport { Singers } from \"common/js/singer\"\r\nimport Scroll from \"base/scroll/scroll.vue\"\r\nimport ListView from \"@/components/list-view/list-view.vue\"\r\nimport { mapMutations, MutationMethod } from \"vuex\"\r\nimport { Mutation } from \"vuex-class\"\r\nimport { AxiosResponse } from \"axios\"\r\nimport jsonp0 from \"common/js/jsonp\"\r\n\r\nconst HOT_NAME = \"热门\"\r\nconst HOT_SONG_LENGTH = 10\r\n@Component({\r\n  components: { Scroll, ListView }\r\n})\r\nexport default class Singer extends Vue {\r\n  items = [\r\n    {\r\n      avatar:\r\n        \"https://y.gtimg.cn/music/photo_new/T001R300x300M000002J4UUk29y8BY.jpg?max_age=2592000\",\r\n      name: \"薛之谦\"\r\n    }\r\n  ]\r\n  singerlist: any[] = []\r\n\r\n  @Mutation(\"SET_SINGER\") setSinger!: MutationMethod\r\n\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this._getSingerLists()\r\n    })\r\n  }\r\n\r\n  normalizeSinger(data: { title: string }[]) {\r\n    const map: any = {\r\n      hot: {\r\n        title: HOT_NAME,\r\n        items: []\r\n      }\r\n    }\r\n    data.forEach((item, index, arr) => {\r\n      if (index <= HOT_SONG_LENGTH - 1) {\r\n        map.hot.items.push(item)\r\n      }\r\n      const key = item.title\r\n      if (!map[key]) {\r\n        map[key] = {\r\n          title: key,\r\n          items: []\r\n        }\r\n      }\r\n      map[key].items.push(item)\r\n    })\r\n\r\n    // 处理map.items 得到有序列表\r\n    const hot: object[] = []\r\n    const ret: { title: string }[] = []\r\n    for (const key in map) {\r\n      if (key.match(/^[a-zA-Z]$/g)) {\r\n        ret.push(map[key])\r\n      } else if (key === \"hot\") {\r\n        hot.push(map[key])\r\n      }\r\n    }\r\n    ret.sort((a: { title: string }, b: { title: string }): number => {\r\n      return a.title.charCodeAt(0) - b.title.charCodeAt(0)\r\n    })\r\n\r\n    return hot.concat(ret)\r\n  }\r\n\r\n  gotoDetails(singer: Singers) {\r\n    this.$router.push({ path: `/singer/${singer.mid}` })\r\n    this.setSinger(singer)\r\n  }\r\n\r\n  _getSingerLists() {\r\n    getSingerLists().then(response => {\r\n      if (response.code === ERR_OK) {\r\n        this.singerlist = this.normalizeSinger(response.data.singerlist)\r\n      }\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./singer.vue?vue&type=template&id=54e27d6e&scoped=true&\"\nimport script from \"./singer.vue?vue&type=script&lang=ts&\"\nexport * from \"./singer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./singer.vue?vue&type=style&index=0&id=54e27d6e&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54e27d6e\",\n  null\n  \n)\n\nexport default component.exports","import { xhrOptions, options2 } from \"./config\"\r\nimport { sign_generator } from \"common/js/xhr\"\r\nimport axios from \"axios\"\r\nimport jsonp from \"common/js/jsonp\"\r\n// const url = \"https://u.y.qq.com/cgi-bin/musics.fcg\"\r\n\r\nconst path = \"/cgi-bin/musics.fcg\"\r\nexport function getSingerLists() {\r\n  return axios\r\n    .get(\r\n      \"https://www.fastmock.site/mock/352dcbb7ac339fe1b7ed02bbfa3c073b/mock/getsingerlists\"\r\n    )\r\n    .then(response => Promise.resolve(response.data.data))\r\n}\r\n\r\nexport function getSingerSongs(mid: string) {\r\n  const data = {\r\n    comm: { ct: 24, cv: 0 },\r\n    singerSongList: {\r\n      method: \"GetSingerSongList\",\r\n      param: { order: 1, singerMid: mid, begin: 0, num: 30 },\r\n      module: \"musichall.song_list_server\"\r\n    }\r\n  }\r\n\r\n  const query = Object.assign({}, xhrOptions, {\r\n    \"-\": \"getSingerSong09973278224209037\",\r\n    sign: sign_generator(data),\r\n    data: data,\r\n    format: \"jsonp\"\r\n  })\r\n\r\n  return jsonp( \"https://u.y.qq.com/cgi-bin/musics.fcg\", query, options2 ).then((response: any) => Promise.resolve(response.singerSongList))\r\n}\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-view.vue?vue&type=style&index=0&id=334fd486&lang=stylus&scoped=true&\"","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=style&index=0&id=54e27d6e&lang=stylus&scoped=true&\"","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.fixed` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.fixed\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('fixed') }, {\n  fixed: function fixed() {\n    return createHTML(this, 'tt', '', '');\n  }\n});\n","function sign_generator(data: any) {\r\n  const str = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n  const count = Math.floor(Math.random() * 7 + 10);\r\n  let sign = \"zza\";\r\n  for (let i = 0; i < count; i++) {\r\n    sign += str[Math.floor(Math.random() * 36)];\r\n  }\r\n  return (sign += (window as any).__sign_hash_20200305(\r\n    \"CJBPACrRuNy7\" + JSON.stringify(data)\r\n  ));\r\n}\r\n\r\nexport { sign_generator };\r\n"],"sourceRoot":""}