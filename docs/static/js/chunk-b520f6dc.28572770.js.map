{"version":3,"sources":["webpack:///./src/views/search/search.vue?fd69","webpack:///./src/views/search/search.vue","webpack:///./src/views/search/search.vue?8546","webpack:///./src/views/search/search.vue?6b3e","webpack:///./src/views/search/search.vue?0cd5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","on","onQueryChange","directives","name","rawName","value","expression","attrs","query","onSelectEvent","shortcutList","_v","_l","key","k","$event","selectItem","_s","searchHistory","showConfirm","removeSearchHistory","clearSearchHistory","staticRenderFns","hotkeys","_getHotKey","$refs","searchBox","setQuery","blur","bottom","playlist","length","shortcut","$el","style","suggestWrap","refresh","suggest","confirm","show","then","response","code","data","hotkey","slice","concat","components","SearchBox","Suggest","HistoryList","IconSvg","Scroll","Confirm","computed","methods","setSinger","component"],"mappings":"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","file":"static/js/chunk-b520f6dc.28572770.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('div',{staticClass:\"search-box-wrap\"},[_c('search-box',{ref:\"searchBox\",on:{\"query\":_vm.onQueryChange}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],ref:\"suggestWrap\",staticClass:\"search-result\"},[_c('suggest',{ref:\"suggest\",attrs:{\"query\":_vm.query},on:{\"select\":_vm.onSelectEvent}})],1),_c('scroll',{ref:\"shortcut\",staticClass:\"shortcut\",attrs:{\"data\":_vm.shortcutList}},[_c('div',{staticClass:\"shortcut-inner\"},[_c('div',{staticClass:\"hotkey-wrap\"},[_c('h1',[_vm._v(\"热门搜索\")]),_c('div',{staticClass:\"hotkey\"},_vm._l((_vm.hotkeys),function(key){return _c('span',{key:key.k,staticClass:\"key\",on:{\"click\":function($event){return _vm.selectItem(key.k)}}},[_vm._v(_vm._s(key.k))])}),0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistory.length),expression:\"searchHistory.length\"}],staticClass:\"search-history\"},[_c('h1',{staticClass:\"clearfix\"},[_c('span',[_vm._v(\"搜索历史\")]),_c('i',{on:{\"click\":_vm.showConfirm}},[_c('icon-svg',{attrs:{\"icon\":\"#el-icon-clearAll\"}})],1)]),_c('history-list',{attrs:{\"list\":_vm.searchHistory},on:{\"delete\":_vm.removeSearchHistory,\"select\":_vm.selectItem}})],1)])]),_c('confirm',{ref:\"confirm\",attrs:{\"enterBtnText\":\"清除\"},on:{\"enter\":_vm.clearSearchHistory}}),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Watch, Mixins } from \"vue-property-decorator\";\r\nimport HistoryList from \"base/history-list/history-list.vue\";\r\nimport SearchBox from \"base/search-box/search-box.vue\";\r\nimport Suggest from \"components/suggest/suggest.vue\";\r\nimport IconSvg from \"base/icon-svg/icon-svg.vue\";\r\nimport Confirm from \"base/confirm/confirm.vue\";\r\nimport Scroll from \"base/scroll/scroll.vue\";\r\nimport Singer from \"common/js/singer.vue\";\r\nimport { getHotKey, getSearchInfo } from \"api/search\";\r\nimport { ERR_OK } from \"api/config\";\r\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\r\nimport axios from \"axios\";\r\nimport { PlaylistMixin, SearchMixin } from \"common/js/mixins\";\r\n\r\nconst TYPE_SINGER = \"singer\";\r\n@Component({\r\n\tcomponents: { SearchBox, Suggest, HistoryList, IconSvg, Scroll, Confirm },\r\n\tcomputed: {\r\n\t\t...mapGetters([\"searchHistory\", \"playlist\"]),\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations({ setSinger: \"SET_SINGER\" }),\r\n\t\t...mapActions([\r\n\t\t\t\"suggestToPlay\",\r\n\t\t\t\"saveSearchHistory\",\r\n\t\t\t\"removeSearchHistory\",\r\n\t\t\t\"clearSearchHistory\",\r\n\t\t]),\r\n\t},\r\n})\r\nexport default class Search extends Mixins(PlaylistMixin, SearchMixin) {\r\n\thotkeys: Array<{ k: string; n: number }> = [];\r\n\tquery = \"\";\r\n\t$refs!: {\r\n\t\tshortcut: Scroll;\r\n\t\tsuggestWrap: HTMLElement;\r\n\t\tconfirm: Confirm;\r\n\t\tsearchBox: SearchBox;\r\n\t\tsuggest: Suggest;\r\n\t};\r\n\r\n\tget shortcutList() {\r\n\t\treturn this.hotkeys.concat(this.searchHistory);\r\n\t}\r\n\tcreated() {\r\n\t\tthis._getHotKey();\r\n\t}\r\n\tselectItem(key: string) {\r\n\t\tthis.$refs.searchBox.setQuery(key);\r\n\t}\r\n\tinputBlur() {\r\n\t\tthis.$refs.searchBox.blur();\r\n\t}\r\n\thandlePlaylist() {\r\n\t\tconst bottom = this.playlist.length ? 60 : 0;\r\n\t\tthis.$refs.shortcut.$el.style.bottom = `${bottom}px`;\r\n\t\tthis.$refs.suggestWrap.style.bottom = `${bottom}px`;\r\n\t\tthis.$refs.shortcut.refresh();\r\n\t\tthis.$refs.suggest.$refs.suggest.refresh();\r\n\t}\r\n\tshowConfirm() {\r\n\t\tthis.$refs.confirm.show();\r\n\t}\r\n\t_getHotKey() {\r\n\t\tgetHotKey().then((response: MyResponse) => {\r\n\t\t\tif (response.code === ERR_OK) {\r\n\t\t\t\tthis.hotkeys = response.data.hotkey.slice(0, 10);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=7b8ed563&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=ts&\"\nexport * from \"./search.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=7b8ed563&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b8ed563\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=7b8ed563&lang=stylus&scoped=true&\""],"sourceRoot":""}