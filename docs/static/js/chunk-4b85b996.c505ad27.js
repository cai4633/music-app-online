(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b85b996"],{"1f23":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"singer"},[i("list-view",{attrs:{singerlist:t.singerlist},on:{select:t.gotoDetails}}),i("transition",{attrs:{name:"slide-in"}},[i("router-view")],1)],1)},s=[],r=(i("99af"),i("4160"),i("ac1f"),i("466d"),i("159b"),i("d4ec")),a=i("bee2"),c=i("262e"),o=i("2caf"),l=i("9ab4"),u=i("60a3"),f=i("4f0d"),h=i("d89f"),g=i("e9fc"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"listView",staticClass:"list-view"},[i("scroll",{ref:"singerWrap",staticClass:"singer-wrap",attrs:{data:t.singerlist,probeType:3},on:{scroll:t.getPosY,scrollEnd:t.scrollEnd}},[i("ul",{staticClass:"singer-content"},t._l(t.singerlist,(function(e){return i("li",{key:e.id,ref:"listgroup",refInFor:!0},[i("ul",{staticClass:"singer-inner"},[i("h3",{ref:"title",refInFor:!0},[t._v(t._s(e.title))]),t._l(e.items,(function(e){return i("li",{key:e.id,staticClass:"clearfix",on:{click:function(i){return t.selectItem(e)}}},[i("div",{staticClass:"avatar"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.webp2jpg(e.singer_pic),expression:"webp2jpg(singer.singer_pic)"}]})]),i("p",{staticClass:"name"},[t._v(t._s(e.singer_name))])])}))],2)])})),0)]),i("h2",{ref:"fixed",staticClass:"fixed-title"},[t._v(t._s(t.titleList[t.currentIndex]))]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.singerlist.length,expression:"!singerlist.length"}],staticClass:"loading-wrap"},[i("loading")],1),i("div",{staticClass:"list-shortcut"},[i("ul",t._l(t.shotcutList,(function(e,n){return i("li",{key:e,class:{active:t.currentIndex===n},attrs:{"data-index":n},on:{click:t.shortcutClick}},[t._v(" "+t._s(e)+" ")])})),0)])],1)},v=[],p=(i("d81d"),i("5319"),i("c7cd"),i("5530")),b=i("1cb8"),m=i("2f62"),k=i("248e"),y=i("cc16"),_=function(t){Object(c["a"])(i,t);var e=Object(o["a"])(i);function i(){var t;return Object(r["a"])(this,i),t=e.apply(this,arguments),t.shotcutList=[],t.heightlist=[],t.titleList=[],t.currentIndex=0,t.titleHeight=0,t.isClick=!1,t}return Object(a["a"])(i,[{key:"mounted",value:function(){var t=this;this.$nextTick((function(){t.init()}))}},{key:"deactivated",value:function(){var t=this;this.$nextTick((function(){t.$refs.singerWrap.disable()}))}},{key:"activated",value:function(){var t=this;this.$nextTick((function(){t.$refs.singerWrap.enable()}))}},{key:"handlePlaylist",value:function(){var t=this.playlist.length?45:0;this.$refs.singerWrap&&(this.$refs.listView.style.bottom="".concat(t,"px"),this.$refs.singerWrap.refresh())}},{key:"init",value:function(){this.calHeight(),this._getShortcutList()}},{key:"webp2jpg",value:function(t){return t.replace(/webp$/,"jpg")}},{key:"scrollEnd",value:function(){this.isClick=!1}},{key:"shortcutClick",value:function(t){var e=t.currentTarget.dataset.index;e&&(this.currentIndex=parseInt(e),this._scrollTo(this.currentIndex),this.isClick=!0)}},{key:"calHeight",value:function(){var t=this;this.$nextTick((function(){var e=t.$refs.listgroup||[],i=0;e.length&&(t.titleHeight=t.$refs.title[0].offsetHeight,t.heightlist=Array.prototype.map.call(e,(function(t){return i+=t.offsetHeight,i})))}))}},{key:"_scrollTo",value:function(t){if(this.heightlist.length){var e=t>=1?-this.heightlist[t-1]:0;this.$refs.singerWrap.scrollTo(0,e)}}},{key:"getPosY",value:function(t){if(this.heightlist.length&&!this.isClick)for(var e=0;e<this.heightlist.length;e++)if(this.heightlist[e]>=-t){this.currentIndex=e;break}this.diff(t)}},{key:"diff",value:function(t){var e=this.heightlist.length?this.heightlist[this.currentIndex]+t-this.titleHeight:0;e=e>0?0:e,this.fixedTransfrom(e)}},{key:"fixedTransfrom",value:function(t){this.$refs.fixed.style.transform="translateY(".concat(t,"px)")}},{key:"_getShortcutList",value:function(){var t=this;this.singerlist.forEach((function(e){t.shotcutList.push(e.title[0]),t.titleList.push(e.title)}))}},{key:"selectItem",value:function(t){var e=new y["a"]({id:t.singer_id,name:t.singer_name,mid:t.singer_mid});this.$emit("select",e)}},{key:"watchSingerlist",value:function(){this.init()}}]),i}(Object(u["b"])(k["b"]));Object(l["a"])([Object(u["c"])()],_.prototype,"singerlist",void 0),Object(l["a"])([Object(u["e"])("singerlist")],_.prototype,"watchSingerlist",null),_=Object(l["a"])([Object(u["a"])({components:{Scroll:g["a"],Loading:b["a"]},computed:Object(p["a"])({},Object(m["c"])(["playlist","fullScreen"]))})],_);var j=_,w=j,x=(i("77c5"),i("2877")),O=Object(x["a"])(w,d,v,!1,null,"7ec9fef2",null),S=O.exports,C=i("4bb5"),$="热门",L=10,T=function(t){Object(c["a"])(i,t);var e=Object(o["a"])(i);function i(){var t;return Object(r["a"])(this,i),t=e.apply(this,arguments),t.items=[{avatar:"https://y.gtimg.cn/music/photo_new/T001R300x300M000002J4UUk29y8BY.jpg?max_age=2592000",name:"薛之谦"}],t.singerlist=[],t}return Object(a["a"])(i,[{key:"mounted",value:function(){var t=this;this.$nextTick((function(){t._getSingerLists()}))}},{key:"normalizeSinger",value:function(t){var e={hot:{title:$,items:[]}};t.forEach((function(t,i,n){i<=L-1&&e.hot.items.push(t);var s=t.title;e[s]||(e[s]={title:s,items:[]}),e[s].items.push(t)}));var i=[],n=[];for(var s in e)s.match(/^[a-zA-Z]$/g)?n.push(e[s]):"hot"===s&&i.push(e[s]);return n.sort((function(t,e){return t.title.charCodeAt(0)-e.title.charCodeAt(0)})),i.concat(n)}},{key:"gotoDetails",value:function(t){this.$router.push({path:"/singer/".concat(t.mid)}),this.setSinger(t)}},{key:"_getSingerLists",value:function(){var t=this;Object(f["a"])().then((function(e){e.code===h["a"]&&(t.singerlist=t.normalizeSinger(e.data.singerlist))}))}}]),i}(u["d"]);Object(l["a"])([Object(C["c"])("SET_SINGER")],T.prototype,"setSinger",void 0),T=Object(l["a"])([Object(u["a"])({components:{Scroll:g["a"],ListView:S}})],T);var I=T,E=I,z=(i("a683"),Object(x["a"])(E,n,s,!1,null,"54e27d6e",null));e["default"]=z.exports},"4f0d":function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return l}));i("d3b7");var n=i("d89f"),s=i("fa9d"),r=i("bc3a"),a=i.n(r),c=i("7776");function o(){return a.a.get("https://www.fastmock.site/mock/352dcbb7ac339fe1b7ed02bbfa3c073b/mock/getsingerlists").then((function(t){return Promise.resolve(t.data.data)}))}function l(t){var e={comm:{ct:24,cv:0},singerSongList:{method:"GetSingerSongList",param:{order:1,singerMid:t,begin:0,num:30},module:"musichall.song_list_server"}},i=Object.assign({},n["g"],{"-":"getSingerSong09973278224209037",sign:Object(s["a"])(e),data:e,format:"jsonp"});return Object(c["a"])("https://u.y.qq.com/cgi-bin/musics.fcg",i,n["e"]).then((function(t){return Promise.resolve(t.singerSongList)}))}},5095:function(t,e,i){},"77c5":function(t,e,i){"use strict";i("9db7")},"857a":function(t,e,i){var n=i("1d80"),s=/"/g;t.exports=function(t,e,i,r){var a=String(n(t)),c="<"+e;return""!==i&&(c+=" "+i+'="'+String(r).replace(s,"&quot;")+'"'),c+">"+a+"</"+e+">"}},"9db7":function(t,e,i){},a683:function(t,e,i){"use strict";i("5095")},af03:function(t,e,i){var n=i("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},c7cd:function(t,e,i){"use strict";var n=i("23e7"),s=i("857a"),r=i("af03");n({target:"String",proto:!0,forced:r("fixed")},{fixed:function(){return s(this,"tt","","")}})},fa9d:function(t,e,i){"use strict";function n(t){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(7*Math.random()+10),n="zza",s=0;s<i;s++)n+=e[Math.floor(36*Math.random())];return n+window.__sign_hash_20200305("CJBPACrRuNy7"+JSON.stringify(t))}i.d(e,"a",(function(){return n}))}}]);
//# sourceMappingURL=chunk-4b85b996.c505ad27.js.map