{"version":3,"sources":["webpack:///./src/views/rank/rank.vue?83e9","webpack:///./src/views/rank/rank.vue","webpack:///./src/views/rank/rank.vue?a6b5","webpack:///./src/views/rank/rank.vue?3803","webpack:///./src/api/rank.ts","webpack:///./src/views/rank/rank.vue?4b82"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","lists","_l","list","key","id","on","$event","selectItem","directives","name","rawName","value","expression","imgLoad","song","songIndex","songname","_v","_s","singername","length","staticRenderFns","_getRank","$refs","rank","refresh","item","setToplist","$router","push","path","BOTTOM","playlist","$el","style","bottom","$nextTick","then","response","code","data","topList","components","Scroll","Loading","component","getRank","url","params","Object","assign","format","g_tk","Date","opt","Promise","resolve","getSongsByTopid","topid","tpl","page","type"],"mappings":"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","file":"js/chunk-d600acc8.e3891a3a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scroll',{ref:\"rank\",staticClass:\"rank\",attrs:{\"data\":_vm.lists}},[_c('div',{staticClass:\"rank-inner\"},[_c('ul',{staticClass:\"content-inner\"},_vm._l((_vm.lists),function(list){return _c('li',{key:'rank' + list.id,on:{\"click\":function($event){return _vm.selectItem(list)}}},[_c('div',{staticClass:\"topIcon\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(list.picUrl),expression:\"list.picUrl\"}],attrs:{\"width\":\"100\"},on:{\"load\":_vm.imgLoad}})]),_c('ul',{staticClass:\"songlist\"},_vm._l((list.songList),function(song,songIndex){return _c('li',{key:song.songname},[_c('span',[_vm._v(_vm._s(songIndex + 1))]),_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(song.songname)+\" - \"+_vm._s(song.singername))])])}),0)])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.lists.length),expression:\"!lists.length\"}],staticClass:\"loading-wrap\"},[_c('loading')],1)]),_c('transition',{attrs:{\"name\":\"slide-in\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Watch, Mixins } from \"vue-property-decorator\"\r\nimport { PlaylistMixin } from \"@/common/js/mixins\"\r\nimport { MutationMethod, mapGetters } from \"vuex\"\r\nimport Scroll from \"base/scroll/scroll.vue\"\r\nimport { getRank } from \"api/rank.ts\"\r\nimport { ERR_OK } from \"api/config\"\r\nimport { Mutation, Getter } from \"vuex-class\"\r\nimport Loading from \"base/loading/loading.vue\"\r\n\r\n@Component({\r\n  components: { Scroll, Loading },\r\n})\r\nexport default class Rank extends Mixins(PlaylistMixin) {\r\n  lists: any[] = []\r\n  $refs!: {\r\n    rank: Scroll\r\n  }\r\n\r\n  @Getter(\"playlist\") playlist!: any[]\r\n  @Mutation(\"SET_TOPLIST\") setToplist!: MutationMethod\r\n\r\n  mounted() {\r\n    this._getRank()\r\n  }\r\n  imgLoad() {\r\n    ;(this.$refs.rank as Scroll).refresh()\r\n  }\r\n  selectItem(item: any) {\r\n    this.setToplist(item)\r\n    this.$router.push({ path: `/rank/${item.id}` })\r\n  }\r\n  handlePlaylist() {\r\n    const BOTTOM = this.playlist.length ? 60 : 0\r\n    if (this.$refs.rank) {\r\n      this.$refs.rank.$el.style.bottom = `${BOTTOM}px`\r\n      this.$refs.rank.refresh()\r\n    }\r\n  }\r\n  _getRank() {\r\n    this.$nextTick(() => {\r\n      return getRank().then((response: any) => {\r\n        if (response.code === ERR_OK) {\r\n          this.lists = response.data.topList\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./rank.vue?vue&type=template&id=655ef829&scoped=true&\"\nimport script from \"./rank.vue?vue&type=script&lang=ts&\"\nexport * from \"./rank.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./rank.vue?vue&type=style&index=0&id=655ef829&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"655ef829\",\n  null\n  \n)\n\nexport default component.exports","import axios from \"axios\";\r\nimport { xhrOptions, jsonpOptions, options } from \"./config\";\r\nimport jsonp0 from \"../common/js/jsonp\";\r\nexport function getRank() {\r\n  const url = \"https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg\";\r\n  const params = Object.assign({}, jsonpOptions, {\r\n    format: \"jsonp\",\r\n    g_tk: +new Date()\r\n  });\r\n  const opt = Object.assign({}, options, { name: \"jsonp1\" });\r\n  return jsonp0(url, params, opt).then((response: any) => {\r\n    return Promise.resolve(response);\r\n  });\r\n}\r\n\r\nexport function getSongsByTopid(id: number) {\r\n  const url = \"https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg\";\r\n  const params = Object.assign({}, jsonpOptions, {\r\n    format: \"jsonp\",\r\n    g_tk: +new Date(),\r\n    topid: id,\r\n    tpl: 3,\r\n    page: \"detail\",\r\n    type: \"top\"\r\n  });\r\n  const opt = Object.assign({}, options, { name: \"__jp2\" });\r\n\r\n  return jsonp0(url, params, opt).then((response: any) => {\r\n    return Promise.resolve(response);\r\n  });\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=style&index=0&id=655ef829&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=style&index=0&id=655ef829&lang=stylus&scoped=true&\""],"sourceRoot":""}