{"version":3,"sources":["webpack:///./src/views/search/search.vue?4f00","webpack:///./src/views/search/search.vue","webpack:///./src/views/search/search.vue?8546","webpack:///./src/views/search/search.vue?6b3e","webpack:///./src/views/search/search.vue?d66c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","on","onQueryChange","directives","name","rawName","value","expression","attrs","query","onSelectEvent","shortcutList","_v","_l","key","k","n","$event","selectItem","_s","searchHistory","showConfirm","removeSearchHistory","clearSearchHistory","staticRenderFns","hotkeys","_getHotKey","$refs","searchBox","setQuery","bottom","playlist","length","shortcut","$el","style","suggestWrap","refresh","suggest","confirm","show","then","response","code","data","hotkey","slice","concat","components","SearchBox","Suggest","HistoryList","IconSvg","Scroll","Confirm","computed","methods","setSinger","component"],"mappings":"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","file":"js/chunk-7b249453.3a38252a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('div',{staticClass:\"search-box-wrap\"},[_c('search-box',{ref:\"searchBox\",on:{\"query\":_vm.onQueryChange}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],ref:\"suggestWrap\",staticClass:\"search-result\"},[_c('suggest',{ref:\"suggest\",attrs:{\"query\":_vm.query},on:{\"select\":_vm.onSelectEvent}})],1),_c('scroll',{ref:\"shortcut\",staticClass:\"shortcut\",attrs:{\"data\":_vm.shortcutList}},[_c('div',{staticClass:\"shortcut-inner\"},[_c('div',{staticClass:\"hotkey-wrap\"},[_c('h1',[_vm._v(\"热门搜索\")]),_c('div',{staticClass:\"hotkey\"},_vm._l((_vm.hotkeys),function(key){return _c('span',{key:key.k + key.n,staticClass:\"key\",on:{\"click\":function($event){return _vm.selectItem(key.k)}}},[_vm._v(_vm._s(key.k))])}),0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistory.length),expression:\"searchHistory.length\"}],staticClass:\"search-history\"},[_c('h1',{staticClass:\"clearfix\"},[_c('span',[_vm._v(\"搜索历史\")]),_c('i',{on:{\"click\":_vm.showConfirm}},[_c('icon-svg',{attrs:{\"icon\":\"#el-icon-clearAll\"}})],1)]),_c('history-list',{attrs:{\"list\":_vm.searchHistory},on:{\"delete\":_vm.removeSearchHistory,\"select\":_vm.selectItem}})],1)])]),_c('confirm',{ref:\"confirm\",attrs:{\"enterBtnText\":\"清除\"},on:{\"enter\":_vm.clearSearchHistory}}),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Watch, Mixins } from \"vue-property-decorator\"\r\nimport HistoryList from \"base/history-list/history-list.vue\"\r\nimport SearchBox from \"base/search-box/search-box.vue\"\r\nimport Suggest from \"components/suggest/suggest.vue\"\r\nimport IconSvg from \"base/icon-svg/icon-svg.vue\"\r\nimport Confirm from \"base/confirm/confirm.vue\"\r\nimport Scroll from \"base/scroll/scroll.vue\"\r\nimport Singer from \"common/js/singer.vue\"\r\nimport { getHotKey, getSearchInfo } from \"api/search\"\r\nimport { ERR_OK } from \"api/config\"\r\nimport { mapMutations, mapActions, mapGetters } from \"vuex\"\r\nimport axios from \"axios\"\r\nimport { PlaylistMixin, SearchMixin } from \"common/js/mixins\"\r\n\r\nconst TYPE_SINGER = \"singer\"\r\n@Component({\r\n  components: { SearchBox, Suggest, HistoryList, IconSvg, Scroll, Confirm },\r\n  computed: {\r\n    ...mapGetters([\"searchHistory\", \"playlist\"]),\r\n  },\r\n  methods: {\r\n    ...mapMutations({ setSinger: \"SET_SINGER\" }),\r\n    ...mapActions([\"suggestToPlay\", \"saveSearchHistory\", \"removeSearchHistory\", \"clearSearchHistory\"]),\r\n  },\r\n})\r\nexport default class Search extends Mixins(PlaylistMixin, SearchMixin) {\r\n  hotkeys: any[] = []\r\n  query = \"\"\r\n  $refs!: {\r\n    shortcut: Scroll\r\n    suggestWrap: HTMLElement\r\n    confirm: Confirm\r\n    searchBox: SearchBox\r\n    suggest: Suggest\r\n  }\r\n\r\n  get shortcutList() {\r\n    return this.hotkeys.concat(this.searchHistory)\r\n  }\r\n  created() {\r\n    this._getHotKey()\r\n  }\r\n  selectItem(key: string) {\r\n    this.$refs.searchBox.setQuery(key)\r\n  }\r\n  handlePlaylist() {\r\n    const bottom = this.playlist.length ? 60 : 0\r\n    this.$refs.shortcut.$el.style.bottom = `${bottom}px`\r\n    this.$refs.suggestWrap.style.bottom = `${bottom}px`\r\n    this.$refs.shortcut.refresh()\r\n    this.$refs.suggest.$refs.suggest.refresh()\r\n  }\r\n  showConfirm() {\r\n    this.$refs.confirm.show()\r\n  }\r\n  _getHotKey() {\r\n    getHotKey().then((response: any) => {\r\n      if (response.code === ERR_OK) {\r\n        this.hotkeys = response.data.hotkey.slice(0, 10)\r\n      }\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=4934e151&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=ts&\"\nexport * from \"./search.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=4934e151&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4934e151\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=4934e151&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=4934e151&lang=stylus&scoped=true&\""],"sourceRoot":""}